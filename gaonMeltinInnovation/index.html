<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ì˜¨ì „ì„  ëª¨ë…¸í´ë¦¬ ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --nav-height: 120px;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            word-break: keep-all;
            background-color: #f3f4f6;
            padding-top: env(safe-area-inset-top);
            padding-bottom: calc(var(--nav-height) + env(safe-area-inset-bottom));
        }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        
        /* ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
        .card-container {
            perspective: 1000px;
            overflow: hidden;
            position: relative;
            height: calc(100vh - 90px - var(--nav-height)); 
            max-height: 800px;
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            cursor: grab;
        }
        .card-container:active { cursor: grabbing; }

        .flashcard {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            opacity: 0;
            transform: translateX(100%);
            pointer-events: none;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .flashcard.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: auto;
            z-index: 10;
        }

        .flashcard.prev {
            opacity: 0;
            transform: translateX(-100%);
            z-index: 0;
        }

        .card-content {
            flex-grow: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 20px;
        }
        
        .card-content::-webkit-scrollbar { width: 6px; }
        .card-content::-webkit-scrollbar-thumb { background-color: #e5e7eb; border-radius: 3px; }

        .gradient-header { background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); color: white; }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ */
        .nav-btn { flex: 0 0 auto; padding: 0 8px; font-size: 0.75rem; }
        .nav-btn i { font-size: 1.25rem; margin-bottom: 2px; }
        .nav-btn.active { color: #2563eb; font-weight: bold; }
        .nav-btn.active i { transform: scale(1.1); color: #2563eb; }
        .nav-main-btn { min-width: 72px; }
        .nav-sub-btn { font-size: 0.8rem; }
        .nav-sub-btn.active {
            color: #1d4ed8;
            font-weight: 700;
            border-bottom: 2px solid #2563eb;
        }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ ë°” ê°€ë¡œ ìŠ¤í¬ë¡¤ (í•„ìš”ì‹œ) */
        .nav-scroll { overflow-x: auto; -ms-overflow-style: none; scrollbar-width: none; white-space: nowrap; }
        .nav-scroll::-webkit-scrollbar { display: none; }
        
        /* Q&A Accordion Animation */
        .qa-answer { transition: max-height 0.3s ease-out, opacity 0.3s ease-out; max-height: 0; opacity: 0; overflow: hidden; }
        .qa-answer.open { max-height: 500px; opacity: 1; }
        .fa-chevron-down { transition: transform 0.3s; }
        .rotate-180 { transform: rotate(180deg); }

        /* Board Image Styling - ëª¨ë°”ì¼ ìµœì í™” */
        .mobile-board-img {
            width: auto;
            height: auto;
            max-height: 180px; 
            max-width: 100%;
            object-fit: contain;
            margin: 0 auto 1rem auto;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Modal Styles */
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        .modal-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background: white;
            width: 90%;
            max-height: 85%;
            border-radius: 16px;
            padding: 20px;
            overflow-y: auto;
            transform: translateY(20px);
            transition: transform 0.3s;
            position: relative;
            text-align: center;
        }
        .modal-overlay.open .modal-content {
            transform: translateY(0);
        }
        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2rem;
            color: #6b7280;
            cursor: pointer;
            z-index: 60;
        }

        /* PCìš© í™”ì‚´í‘œ ë²„íŠ¼ */
        .pc-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.2s;
            color: #4b5563;
        }
        .pc-nav-btn:hover { background-color: white; color: #2563eb; box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        .pc-nav-btn.left { left: -25px; } 
        .pc-nav-btn.right { right: -25px; }

        @media (max-width: 640px) {
            .pc-nav-btn { display: none; }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-start sm:justify-center min-h-screen p-2 sm:p-4 pt-4 sm:pt-0 bg-gray-100">

    <div class="w-full max-w-lg relative">
        
        <!-- PC Navigation Arrows -->
        <button class="pc-nav-btn left" onclick="prevSlide()" aria-label="ì´ì „ ìŠ¬ë¼ì´ë“œ" aria-controls="card-wrapper"><i class="fas fa-chevron-left text-xl"></i></button>
        <button class="pc-nav-btn right" onclick="nextSlide()" aria-label="ë‹¤ìŒ ìŠ¬ë¼ì´ë“œ" aria-controls="card-wrapper"><i class="fas fa-chevron-right text-xl"></i></button>

        <!-- Cards Area -->
        <div class="card-container" id="card-wrapper">

            <!-- 0. ë©”ì¸ (Intro) -->
            <div class="flashcard active">
                <div class="card-content flex flex-col items-center justify-center p-8 text-center h-full">
                    <div class="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-8 animate-bounce shadow-md">
                        <i class="fas fa-building text-5xl text-blue-600"></i>
                    </div>
                    <h1 class="text-4xl font-black text-gray-800 mb-4 leading-tight">ê°€ì˜¨ì „ì„ <br>ëª¨ë…¸í´ë¦¬</h1>
                    <p class="text-xl text-blue-600 font-bold mb-10">Activity Guidebook</p>
                    
                    <div class="bg-gray-50 rounded-2xl p-6 w-full mb-8 border border-gray-200 shadow-sm">
                        <div class="flex justify-between items-center mb-4 border-b border-gray-200 pb-4">
                            <span class="text-gray-500 text-lg">ì œí•œ ì‹œê°„</span>
                            <span class="font-bold text-red-500 text-xl">45ë¶„</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 text-lg">ìŠ¹ë¦¬ ì¡°ê±´</span>
                            <span class="font-bold text-blue-800 text-xl">ìµœì¢… ìì‚° 1ìœ„</span>
                        </div>
                    </div>
                    <p class="text-gray-400 text-base animate-pulse">ì•„ë˜ ë©”ë‰´ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš” ğŸ‘‡</p>
                </div>
            </div>

            <!-- 1. ì¤€ë¹„ (Role) -->
            <div class="flashcard">
                <div class="bg-gray-800 text-white p-6 pt-8">
                    <span class="bg-yellow-400 text-gray-900 text-sm font-bold px-2 py-1 rounded">ì¤€ë¹„ ë‹¨ê³„</span>
                    <h2 class="text-3xl font-bold mt-2">ì—­í•  ë‚˜ëˆ„ê¸°</h2>
                </div>
                <div class="card-content p-6 space-y-6">
                    <!-- ì „ëµë‹´ë‹¹ì -->
                    <div class="bg-blue-50 p-6 rounded-2xl border-l-8 border-blue-500 shadow-sm">
                        <h3 class="font-bold text-blue-900 text-2xl mb-2 flex items-center"><i class="fas fa-chess-knight mr-3"></i>ì „ëµë‹´ë‹¹ì</h3>
                        <p class="text-gray-700 text-lg font-medium">"ê²Œì„ ìš´ì˜ ë‹´ë‹¹"</p>
                        <ul class="text-base mt-4 text-gray-600 space-y-2 list-disc pl-5">
                            <li>ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° & ë§ ì´ë™</li>
                            <li>ë•… êµ¬ë§¤ ê²°ì • ë° <strong class="text-blue-700 bg-blue-100 px-1">ì¸ìˆ˜ í˜‘ìƒ</strong></li>
                        </ul>
                    </div>

                    <!-- ì¬ì •ë‹´ë‹¹ì -->
                    <div class="bg-purple-50 p-6 rounded-2xl border-l-8 border-purple-500 shadow-sm">
                        <h3 class="font-bold text-purple-900 text-2xl mb-2 flex items-center"><i class="fas fa-file-invoice-dollar mr-3"></i>ì¬ì •ë‹´ë‹¹ì</h3>
                        <p class="text-gray-700 text-lg font-medium">"ìê¸ˆ ê´€ë¦¬ ë‹´ë‹¹"</p>
                        <ul class="text-base mt-4 text-gray-600 space-y-2 list-disc pl-5">
                            <li><strong class="text-purple-700 bg-purple-100 px-1">ì†ìµê³„ì‚°ì„œ</strong> ì‘ì„±</li>
                            <li>ì¹´ë“œ ê²°ì œê¸° ì¡°ì‘ ë° ì€í–‰ ì—…ë¬´</li>
                        </ul>
                    </div>

                    <!-- 3ì¸ 1íŒ€ ì¼€ì´ìŠ¤ -->
                    <div class="bg-gray-100 p-5 rounded-xl border border-gray-300">
                        <h3 class="font-bold text-gray-800 text-lg mb-2"><i class="fas fa-users mr-2"></i>3ì¸ 1íŒ€ì¸ ê²½ìš°?</h3>
                        <p class="text-gray-700 text-base">
                            ë‚¨ì€ í•œ ë¶„ì€ <strong>'CEO (ì´ê´„)'</strong> ì—­í• ì„ ë§¡ì•„ì£¼ì„¸ìš”.<br>
                            <span class="text-sm text-gray-500 mt-1 block">- ìµœì¢… ì˜ì‚¬ê²°ì • ë° íƒ€ íŒ€ê³¼ì˜ í˜‘ìƒ ì£¼ë„</span>
                            <span class="text-sm text-gray-500 block">- ì „ëµ/ì¬ì • ë‹´ë‹¹ì ì§€ì›</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- 2. ì„¸íŒ… (Card Reader) -->
            <div class="flashcard">
                <div class="bg-gray-800 text-white p-6 pt-8">
                    <span class="bg-yellow-400 text-gray-900 text-sm font-bold px-2 py-1 rounded">í•„ë…</span>
                    <h2 class="text-3xl font-bold mt-2">ì¹´ë“œ ê²°ì œê¸° ì‚¬ìš©ë²•</h2>
                </div>
                <div class="card-content p-6">
                    
                    <!-- ì´ˆê¸°í™” ì£¼ì˜ì‚¬í•­ -->
                    <div class="mb-8 border-b pb-6 border-gray-200">
                        <div class="flex items-start">
                            <span class="bg-red-100 text-red-600 w-8 h-8 rounded-full flex items-center justify-center font-bold text-lg mr-3 mt-1 shrink-0">1</span>
                            <div>
                                <h3 class="font-bold text-xl text-gray-800 mb-2">ì´ˆê¸°í™” (15M ì„¸íŒ…)</h3>
                                <div class="bg-red-50 border border-red-200 p-3 rounded-lg mb-3">
                                    <p class="text-red-600 font-bold text-sm">âš ï¸ ì£¼ì˜: ê²Œì„ ì‹œì‘ ì „ì—ë§Œ ëˆ„ë¥´ì„¸ìš”!</p>
                                    <p class="text-red-500 text-xs">ê²Œì„ ë„ì¤‘ ëˆ„ë¥´ë©´ ëª¨ë“  ê¸ˆì•¡ì´ ë‚ ì•„ê°‘ë‹ˆë‹¤.</p>
                                </div>
                                <p class="text-gray-600 text-base leading-relaxed">
                                    ì¹´ë“œë¥¼ ê½‚ì€ ìƒíƒœì—ì„œ <span class="font-bold text-red-500 border border-red-200 px-2 py-1 rounded bg-white">C ë²„íŠ¼</span>ì„ 
                                    'ì‚-' ì†Œë¦¬ê°€ ë‚  ë•Œê¹Œì§€ ê¸¸ê²Œ ëˆ„ë¥´ì„¸ìš”.<br>
                                    í™”ë©´ì— <strong>15,000</strong>ì´ ëœ¨ë©´ ì¤€ë¹„ ì™„ë£Œ!
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- ëˆ ë„£ê³  ë¹¼ê¸° -->
                    <div class="mb-8 border-b pb-6 border-gray-200">
                        <div class="flex items-start">
                            <span class="bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center font-bold text-lg mr-3 mt-1 shrink-0">2</span>
                            <div>
                                <h3 class="font-bold text-xl text-gray-800 mb-2">ê¸ˆì•¡ ì…ë ¥í•˜ê¸°</h3>
                                <p class="text-gray-600 text-base mb-2">ë°˜ë“œì‹œ ì¹´ë“œë¥¼ ê½‚ì€ í›„ ì…ë ¥í•˜ì„¸ìš”.</p>
                                <ul class="space-y-2 text-base bg-gray-50 p-3 rounded-lg">
                                    <li>ğŸ‘‰ <strong>1M</strong> ì…ë ¥: <span class="bg-white border px-1 rounded font-mono text-sm">1</span> â¡ <span class="bg-white border px-1 rounded font-mono text-sm">M</span></li>
                                    <li>ğŸ‘‰ <strong>500K</strong> ì…ë ¥: <span class="bg-white border px-1 rounded font-mono text-sm">5</span> <span class="bg-white border px-1 rounded font-mono text-sm">0</span> <span class="bg-white border px-1 rounded font-mono text-sm">0</span> â¡ <span class="bg-white border px-1 rounded font-mono text-sm">K</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- ê²°ì œ -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-xl text-center border border-blue-100">
                            <p class="text-blue-800 font-bold text-lg mb-1">ëˆ ë°›ì„ ë•Œ</p>
                            <p class="text-sm text-gray-500 mb-2">(ì›”ê¸‰, í†µí–‰ë£Œ ìˆ˜ì…)</p>
                            <div class="bg-white py-2 px-4 rounded-lg shadow-sm text-lg font-bold">
                                + ë²„íŠ¼
                            </div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-xl text-center border border-red-100">
                            <p class="text-red-800 font-bold text-lg mb-1">ëˆ ë‚¼ ë•Œ</p>
                            <p class="text-sm text-gray-500 mb-2">(íˆ¬ì, ë²Œê¸ˆ ì§€ì¶œ)</p>
                            <div class="bg-white py-2 px-4 rounded-lg shadow-sm text-lg font-bold">
                                - ë²„íŠ¼
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- 3. ì´ë™ (Step 1) -->
            <div class="flashcard">
                <div class="gradient-header p-6 pt-8">
                    <span class="bg-white/20 text-white text-sm font-bold px-2 py-1 rounded">STEP 1</span>
                    <h2 class="text-3xl font-bold mt-2"><i class="fas fa-dice mr-3"></i>ì´ë™í•˜ê¸°</h2>
                </div>
                <div class="card-content p-6 flex flex-col items-center justify-center text-center">
                    <i class="fas fa-dice-five text-7xl text-blue-300 mb-8 animate-pulse"></i>
                    <p class="text-2xl font-bold text-gray-800 mb-8 leading-snug">
                        ì£¼ì‚¬ìœ„ ë‘ ê°œë¥¼ êµ´ë ¤<br>ë‚˜ì˜¨ ìˆ˜ë§Œí¼ ì´ë™í•˜ì„¸ìš”.
                    </p>
                    
                    <div class="bg-yellow-50 border-2 border-yellow-300 p-6 rounded-2xl w-full shadow-md">
                        <h3 class="font-bold text-yellow-800 text-xl mb-3 flex justify-center items-center">
                            <i class="fas fa-star text-yellow-500 mr-2"></i>ë”ë¸” ì°¬ìŠ¤<i class="fas fa-star text-yellow-500 ml-2"></i>
                        </h3>
                        <p class="text-lg text-gray-700 leading-relaxed">
                            ë‘ ì£¼ì‚¬ìœ„ ìˆ«ìê°€ ê°™ìœ¼ë©´?<br>
                            ì´ë™ì„ ë§ˆì¹œ í›„,<br>
                            <strong>í•œ ë²ˆ ë”</strong> êµ´ë¦½ë‹ˆë‹¤!<br>
                            <span class="text-base text-gray-500 mt-2 block">(â€» í•œ í„´ì— 1ë²ˆë§Œ ê°€ëŠ¥)</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- 4. í–‰ë™ A (Step 2 - Business) ìƒì„¸ ì„¤ëª… í˜ì´ì§€ -->
            <div class="flashcard">
                <div class="bg-green-600 text-white p-6 pt-8">
                    <span class="bg-white/20 text-white text-sm font-bold px-2 py-1 rounded">STEP 2-A</span>
                    <h2 class="text-3xl font-bold mt-2"><i class="fas fa-briefcase mr-3"></i>ì‚¬ì—… ì¹¸ ë„ì°©</h2>
                </div>
                <div class="card-content p-6 space-y-6">
                    
                    <!-- ë¹ˆ ì¹¸ -->
                    <div class="border-2 border-gray-100 rounded-2xl p-5 shadow-sm bg-white">
                        <div class="flex items-center mb-3">
                            <span class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center mr-3 text-gray-500"><i class="far fa-square text-xl"></i></span>
                            <h3 class="font-bold text-xl text-gray-800">1. ì£¼ì¸ì´ ì—†ëŠ” ë¹ˆ ì¹¸</h3>
                        </div>
                        <p class="text-lg text-gray-600 pl-2 ml-10 border-l-4 border-gray-100">
                            <span class="text-green-600 font-bold text-xl bg-green-50 px-2 rounded">êµ¬ë§¤ ê°€ëŠ¥!</span><br>
                            ì¹¸ì— ì íŒ 'íˆ¬ìë¹„ìš©'ì„ ë‚´ê³ <br>ì‚¬ì—…ê¶Œì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- ë‚¨ì˜ ë•… -->
                    <div class="border-2 border-red-100 rounded-2xl p-5 shadow-sm bg-red-50">
                        <div class="flex items-center mb-3">
                            <span class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mr-3 text-red-500"><i class="fas fa-user-lock text-xl"></i></span>
                            <h3 class="font-bold text-xl text-red-800">2. ë‹¤ë¥¸ íŒ€ì˜ ì¹¸</h3>
                        </div>
                        <ol class="list-decimal pl-6 ml-10 space-y-2 text-lg text-gray-700">
                            <li>ì£¼ì¸ì—ê²Œ <strong class="text-red-600">í†µí–‰ë£Œ</strong> ì§€ë¶ˆ (í•„ìˆ˜)</li>
                            <li>ì›í•œë‹¤ë©´ <strong class="bg-yellow-200 px-1 rounded text-blue-800">ì¸ìˆ˜ í˜‘ìƒ</strong> ì‹œë„<br>
                                <span class="text-sm text-gray-500">"ì›ƒëˆ ì¤„ í…Œë‹ˆ íŒŒì„¸ìš”!" (ì£¼ì¸ ìŠ¹ë½ ì‹œ ê°€ëŠ¥)</span>
                            </li>
                        </ol>
                    </div>

                    <!-- ë‚´ ë•… -->
                    <div class="border-2 border-blue-100 rounded-2xl p-5 shadow-sm bg-blue-50">
                        <div class="flex items-center mb-3">
                            <span class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3 text-blue-500"><i class="fas fa-flag text-xl"></i></span>
                            <h3 class="font-bold text-xl text-blue-800">3. ìš°ë¦¬ íŒ€ì˜ ì¹¸</h3>
                        </div>
                        <p class="text-lg text-gray-600 pl-2 ml-10 border-l-4 border-blue-200">
                            í†µí–‰ë£Œ ì—†ì´ í¸ì•ˆí•˜ê²Œ ì‰½ë‹ˆë‹¤.<br>
                            <span class="text-sm text-blue-500">("ì—¬ê¸´ ìš°ë¦¬ êµ¬ì—­ì´ì•¼!")</span>
                        </p>
                    </div>

                </div>
            </div>

            <!-- 5. í–‰ë™ B (Step 2 - Other Special Spaces) -->
            <div class="flashcard">
                <div class="bg-green-600 text-white p-6 pt-8">
                    <span class="bg-white/20 text-white text-sm font-bold px-2 py-1 rounded">STEP 2-B</span>
                    <h2 class="text-3xl font-bold mt-2"><i class="fas fa-map-marked-alt mr-3"></i>íŠ¹ìˆ˜ ì¹¸ ê°€ì´ë“œ</h2>
                </div>
                <div class="card-content p-6">
                    <p class="text-gray-500 mb-4 text-center text-sm">í„°ì¹˜í•˜ì—¬ ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”!</p>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <!-- Items -->
                        <button onclick="openModal('production')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition">
                            <i class="fas fa-industry text-2xl text-indigo-600 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">ìƒì‚°í˜„ì¥</span>
                        </button>
                        <button onclick="openModal('chance')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition">
                            <i class="fas fa-dice text-2xl text-yellow-500 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">ë³µë¶ˆë³µ</span>
                        </button>
                        <button onclick="openModal('failure')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition">
                            <i class="fas fa-exclamation-triangle text-2xl text-red-500 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">íˆ¬ì ì‹¤íŒ¨</span>
                        </button>
                        <button onclick="openModal('go')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition">
                            <i class="fas fa-play text-2xl text-green-600 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">Go! (ì¶œë°œ)</span>
                        </button>
                        <button onclick="openModal('vacation')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition">
                            <i class="fas fa-umbrella-beach text-2xl text-blue-400 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">íœ´ê°€</span>
                        </button>
                        <button onclick="openModal('overseas')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition">
                            <i class="fas fa-plane text-2xl text-purple-600 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">í•´ì™¸ì˜ì—…ì†Œ</span>
                        </button>
                        <button onclick="openModal('social')" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center hover:bg-gray-50 transition col-span-2">
                            <i class="fas fa-hand-holding-heart text-2xl text-pink-500 mb-1"></i>
                            <span class="font-bold text-gray-700 text-sm">ì‚¬íšŒê³µí—Œ</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 6. ì •ì‚° (Step 3) -->
            <div class="flashcard">
                <div class="bg-purple-600 text-white p-6 pt-8">
                    <span class="bg-white/20 text-white text-sm font-bold px-2 py-1 rounded">STEP 3</span>
                    <h2 class="text-3xl font-bold mt-2"><i class="fas fa-coins mr-3"></i>ì •ì‚°í•˜ê¸°</h2>
                </div>
                <div class="card-content p-6 pt-10 flex flex-col items-center justify-center text-center">
                    <div class="mb-8 animate-bounce">
                        <span class="text-7xl">ğŸ“¢</span>
                    </div>
                    <h3 class="text-3xl font-black text-purple-800 mb-4">"ì, ì •ì‚°í•©ì‹œë‹¤!"</h3>
                    <p class="text-lg text-gray-600 mb-8">ëª¨ë“  íŒ€ì˜ ì´ë™/í–‰ë™ì´ ëë‚œ í›„<br>(ë§¤ í„´ ì¢…ë£Œ ì‹œ) ë‹¤ í•¨ê»˜ ì •ì‚°í•©ë‹ˆë‹¤.</p>

                    <div class="w-full bg-purple-50 p-6 rounded-2xl border border-purple-200 text-left shadow-sm">
                        <p class="font-bold text-purple-900 text-xl mb-4 border-b border-purple-200 pb-2">ì •ì‚° ìˆœì„œ</p>
                        <ol class="list-decimal pl-6 text-lg space-y-3 text-gray-800">
                            <li><strong>ì†ìµ ê³„ì‚°:</strong><br><span class="text-base text-gray-600">(ì´ë²ˆ í„´ ìˆ˜ì…) - (ì´ë²ˆ í„´ ì§€ì¶œ)</span></li>
                            <li><strong>ë‹¨ë§ê¸° ì…ë ¥:</strong><br><span class="text-base text-gray-600">ìµœì¢… ê¸ˆì•¡ë§Œí¼ ì…ê¸ˆ(+) ë˜ëŠ” ì¶œê¸ˆ(-)</span></li>
                        </ol>
                    </div>

                    <div class="mt-6 bg-yellow-100 text-yellow-900 text-base p-4 rounded-xl w-full border border-yellow-200">
                        ğŸ’¡ <strong>Tip:</strong> í–‰ë™ ë‹¨ê³„ì—ì„œ <strong class="underline">ì†ìµê³„ì‚°ì„œ</strong>ì— ë¯¸ë¦¬ ì ì–´ë‘ë©´, í„´ ì¢…ë£Œ í›„ ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ ì •ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>

                    <div class="w-full mt-8">
                        <button
                            onclick="goToSlide(7)"
                            class="w-full bg-white border border-purple-200 rounded-2xl p-5 shadow-sm text-left hover:border-purple-300 transition"
                        >
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="text-lg font-bold text-purple-800">ì†ìµê³„ì‚°ê¸° ë°”ë¡œê°€ê¸°</h4>
                                <i class="fas fa-arrow-right text-purple-400"></i>
                            </div>
                            <p class="text-sm text-gray-500">
                                ì†ìµê³„ì‚°ê¸°ëŠ” ë³„ë„ í˜ì´ì§€ì—ì„œ ì…ë ¥í•˜ì„¸ìš”.
                            </p>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 7. ì†ìµê³„ì‚°ê¸° -->
            <div class="flashcard">
                <div class="bg-blue-700 text-white p-6 pt-8 hidden sm:block">
                    <span class="bg-white/20 text-white text-sm font-bold px-2 py-1 rounded">ì •ì‚° ë„ìš°ë¯¸</span>
                    <h2 class="text-3xl font-bold mt-2"><i class="fas fa-calculator mr-3"></i>ì†ìµê³„ì‚°ê¸°</h2>
                </div>
                <div class="card-content p-0 sm:p-6 bg-white">
                    <div class="text-left w-full bg-white border-0 sm:border sm:border-blue-100 rounded-none sm:rounded-2xl p-4 sm:p-5 shadow-none sm:shadow-sm">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-lg font-bold text-blue-800">ì†ìµ ê³„ì‚°ê¸°</h4>
                            <span class="text-xs text-gray-400">ì§ì ‘ ì…ë ¥ ê°€ëŠ¥</span>
                        </div>
                        <div id="settlement-app"></div>
                    </div>
                </div>
            </div>

            <!-- 8. Q&A -->
            <div class="flashcard">
                <div class="bg-indigo-600 text-white p-6 pt-8">
                    <span class="bg-white/20 text-white text-sm font-bold px-2 py-1 rounded">Q&A</span>
                    <h2 class="text-3xl font-bold mt-2"><i class="fas fa-question-circle mr-3"></i>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>
                </div>
                <div class="card-content p-6 space-y-4">
                    
                    <!-- Q: Double -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ë”ë¸”ì´ ë‘ ë²ˆ ì—°ì† ë‚˜ì™”ì–´ìš”!</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. ì•„ì‰½ì§€ë§Œ ë©ˆì¶°ì•¼ í•©ë‹ˆë‹¤.</span>
                                ë”ë¸” ë³´ë„ˆìŠ¤ ì´ë™ì€ 1í„´ì— <strong class="text-indigo-600">ìµœëŒ€ 1ë²ˆë§Œ</strong> ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
                                <span class="text-sm text-gray-500">(2ì—°ì† ë”ë¸”ì´ì–´ë„ 3ë²ˆì§¸ëŠ” ëª» ë˜ì§)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Q: Monopoly Bonus -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ë…ì  ë³´ë„ˆìŠ¤ë„ ìˆë‚˜ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. ë„¤, ìƒ‰ê¹”ë³„ ë…ì  ë³´ë„ˆìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤!</span>
                                <ul class="list-disc pl-5 text-sm text-gray-600 mt-2 space-y-1">
                                    <li><strong>ê°™ì€ ìƒ‰ 5ì¥ ìˆ˜ì§‘:</strong> ë³´ë„ˆìŠ¤ ì—†ìŒ</li>
                                    <li><strong>ìƒ‰ê¹”ë³„ë¡œ í•œ ì¥ì”© ìˆ˜ì§‘ (ì´ 4ì¥):</strong> ë³´ìœ  ìì‚° ê¸ˆì•¡ <strong class="text-blue-600">2ë°° ë³´ë„ˆìŠ¤!</strong></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Q: Settlement Time -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ì¹´ë“œ ê²°ì œëŠ” ì–¸ì œ í•˜ë‚˜ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. í„´ì´ ëë‚œ í›„ í•œ ë²ˆì—!</span>
                                ë§¤ í–‰ë™ë§ˆë‹¤ í•˜ì§€ ì•Šê³ , <strong class="text-gray-800">ëª¨ë“  íŒ€ì˜ ì´ë™ì´ ëë‚œ í›„</strong> ì†ìµê³„ì‚°ì„œë¥¼ ë³´ê³  ì¼ê´„ ì •ì‚°í•©ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                    <!-- Q: Same Space -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ìƒëŒ€ë°©í•˜ê³  ê°™ì€ ì¹¸ì— ë„ì°©í•˜ë©´ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
                                ê²¹ì³ì„œ ì„œ ìˆì–´ë„ ê´œì°®ìŠµë‹ˆë‹¤. ì¹¸ì˜ ì£¼ì¸ì´ ìˆë‹¤ë©´ í†µí–‰ë£Œë§Œ ì§€ë¶ˆí•˜ë©´ ë©ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                    <!-- Q: No Cards -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ì¹´ë“œê°€ ë‹¤ ë–¨ì–´ì¡Œë‹¤ë©´ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. íšë“í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
                                ìƒì‚°í˜„ì¥ì¹´ë“œë‚˜ ì‚¬íšŒê³µí—Œì¹´ë“œê°€ ë™ë‚¬ë‹¤ë©´, í•´ë‹¹ ì¹¸ì— ë„ì°©í•´ë„ <strong class="text-red-600">ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong> (ë³´ë„ˆìŠ¤ íšë“ ë¶ˆê°€)
                            </div>
                        </div>
                    </div>

                    <!-- Q: Bankruptcy -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ëˆì´ ë¶€ì¡±í•´ íŒŒì‚°í•˜ë©´ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. ìì‚°ì„ ë§¤ê°í•˜ì„¸ìš”.</span>
                                ê°€ì§€ê³  ìˆëŠ” <strong>ì‚¬ì—… ì¹´ë“œ(ë•…)</strong>ë¥¼ ì€í–‰ì— ë°˜ë‚©í•˜ê³ , ì í˜€ìˆëŠ” êµ¬ì… ë¹„ìš©ì„ ëŒë ¤ë°›ì•„ ë¹šì„ ê°šìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                    <!-- Q: Negotiation Fail -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ì¸ìˆ˜ ì œì•ˆì„ ê±°ì ˆë‹¹í•˜ë©´ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. ê°•ì œë¡œ ëºì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span>
                                ë•… ì£¼ì¸ì´ "ì•ˆ íŒ”ì•„ìš”!" í•˜ë©´ ì–´ì©” ìˆ˜ ì—†ìŠµë‹ˆë‹¤. <strong class="text-blue-600">í†µí–‰ë£Œë§Œ ì§€ë¶ˆ</strong>í•˜ê³  í„´ì„ ë§ˆì¹©ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                    <!-- Q: Mine -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ë‚´ ë•…ì— ë˜ ê±¸ë¦¬ë©´ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. í¸ì•ˆí•˜ê²Œ ì‰½ë‹ˆë‹¤.</span>
                                í†µí–‰ë£Œë„ ì—†ê³ , ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                    <!-- Q: Start Space -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <button onclick="toggleQa(this)" class="w-full text-left p-4 flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition">
                            <span class="font-bold text-lg text-indigo-900"><span class="text-indigo-500 mr-2">Q.</span>ì¶œë°œ ì¹¸ì„ ì§€ë‚˜ê°€ê¸°ë§Œ í•´ë„ ì›”ê¸‰ì„ ë°›ë‚˜ìš”?</span>
                            <i class="fas fa-chevron-down text-indigo-400 transition-transform duration-300"></i>
                        </button>
                        <div class="qa-answer bg-white px-5 text-gray-700 text-lg border-t border-gray-100">
                            <div class="py-4">
                                <span class="font-bold text-gray-600 block mb-1">A. ë„¤! ì›”ê¸‰ ë°›ìŠµë‹ˆë‹¤.</span>
                                ì¶œë°œ ì¹¸ì— <strong>ë„ì°©í•˜ê±°ë‚˜ ì§€ë‚˜ê°ˆ ë•Œ</strong> ëª¨ë‘ ì›”ê¸‰ 2Mì„ ë°›ìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                </div>
            </div>

             <!-- 9. ì¢…ë£Œ (End) -->
             <div class="flashcard">
                <div class="bg-gray-900 text-white p-6 flex flex-col justify-center h-full text-center">
                    <div class="mb-10">
                        <i class="fas fa-trophy text-6xl text-yellow-400 animate-pulse"></i>
                    </div>
                    <h2 class="text-4xl font-bold mb-6">ê²Œì„ ì¢…ë£Œ!</h2>
                    <p class="text-gray-400 text-lg mb-10">45ë¶„ì´ ì§€ë‚˜ë©´ ìµœì¢… ìì‚°ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    
                    <div class="bg-gray-800 rounded-2xl p-6 text-left space-y-3">
                        <h3 class="font-bold text-yellow-400 border-b border-gray-700 pb-2 mb-2">ìµœì¢… ìì‚° ê³„ì‚°ë²•</h3>
                        <div class="flex justify-between">
                            <span>1. ë³´ìœ  í˜„ê¸ˆ</span>
                            <span class="text-gray-400">(ë‹¨ë§ê¸° ì”ì•¡)</span>
                        </div>
                        <div class="flex justify-between">
                            <span>2. ì‚¬ì—… ê°€ì¹˜</span>
                            <span class="text-gray-400">(íˆ¬ìë¹„ìš© ì´í•©)</span>
                        </div>
                        <div class="flex justify-between text-yellow-200">
                            <span>3. ë³´ë„ˆìŠ¤ ì ìˆ˜</span>
                            <span>(ì¹´ë“œ ì ìˆ˜)</span>
                        </div>
                    </div>
                    <button onclick="goToSlide(0)" class="mt-8 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-full transition shadow-lg">
                        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            </div>

        </div>

        <!-- Navigation -->
        <div class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 pb-safe shadow-lg z-50">
            <div class="w-full nav-scroll">
                <div class="px-5 py-2 border-b border-gray-100">
                    <div id="nav-sub-prep" class="flex items-center space-x-3 hidden">
                        <button onclick="goToSlide(1)" class="nav-sub-btn text-gray-400 hover:text-blue-600 transition" data-sub="1">ì¤€ë¹„</button>
                        <button onclick="goToSlide(2)" class="nav-sub-btn text-gray-400 hover:text-blue-600 transition" data-sub="2">ì„¸íŒ…</button>
                    </div>
                    <div id="nav-sub-progress" class="flex items-center space-x-3 hidden">
                        <button onclick="goToSlide(3)" class="nav-sub-btn text-gray-400 hover:text-blue-600 transition" data-sub="3">ì´ë™</button>
                        <button onclick="goToSlide(4)" class="nav-sub-btn text-gray-400 hover:text-blue-600 transition" data-sub="4">ì‚¬ì—… ì¹¸</button>
                        <button onclick="goToSlide(5)" class="nav-sub-btn text-gray-400 hover:text-blue-600 transition" data-sub="5">íŠ¹ìˆ˜ ì¹¸</button>
                        <button onclick="goToSlide(6)" class="nav-sub-btn text-gray-400 hover:text-blue-600 transition" data-sub="6">ì •ì‚°</button>
                    </div>
                </div>
                <div class="flex justify-between items-center px-4 py-2 min-w-max space-x-4">
                    <button onclick="goToSlide(1)" class="nav-btn nav-main-btn flex flex-col items-center text-gray-400 hover:text-blue-600 transition" data-main="prep">
                        <i class="fas fa-users text-xl mb-1"></i>
                        <span class="text-xs font-medium">ì¤€ë¹„</span>
                    </button>
                    <button onclick="goToSlide(3)" class="nav-btn nav-main-btn flex flex-col items-center text-gray-400 hover:text-blue-600 transition" data-main="progress">
                        <i class="fas fa-route text-xl mb-1"></i>
                        <span class="text-xs font-medium">ê²Œì„ë°©ë²•</span>
                    </button>
                    <button onclick="goToSlide(7)" class="nav-btn nav-main-btn flex flex-col items-center text-gray-400 hover:text-blue-600 transition" data-main="calculator">
                        <i class="fas fa-calculator text-xl mb-1"></i>
                        <span class="text-xs font-medium">ì†ìµê³„ì‚°ê¸°</span>
                    </button>
                    <button onclick="goToSlide(8)" class="nav-btn nav-main-btn flex flex-col items-center text-gray-400 hover:text-blue-600 transition" data-main="qa">
                        <i class="fas fa-question-circle text-xl mb-1"></i>
                        <span class="text-xs font-medium">Q&A</span>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Modal Template -->
    <div id="modal-overlay" class="modal-overlay" onclick="closeModal()" aria-hidden="true">
        <div class="modal-content" onclick="event.stopPropagation()" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <button type="button" id="modal-close" class="modal-close" onclick="closeModal()" aria-label="ëª¨ë‹¬ ë‹«ê¸°">&times;</button>
            <div id="modal-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.flashcard');
        const navMainBtns = document.querySelectorAll('.nav-main-btn');
        const navSubBtns = document.querySelectorAll('.nav-sub-btn');
        const navSubPrep = document.getElementById('nav-sub-prep');
        const navSubProgress = document.getElementById('nav-sub-progress');
        const totalSlides = slides.length;

        function updateSlide() {
            slides.forEach((slide, index) => {
                slide.classList.remove('active', 'prev');
                if (index === currentSlide) {
                    slide.classList.add('active');
                } else if (index < currentSlide) {
                    slide.classList.add('prev');
                }
            });

            // Update Navigation Buttons Highlight
            navMainBtns.forEach(btn => btn.classList.remove('active'));
            navSubBtns.forEach(btn => btn.classList.remove('active'));

            navSubPrep.classList.add('hidden');
            navSubProgress.classList.add('hidden');

            if (currentSlide === 1 || currentSlide === 2) {
                navMainBtns.forEach(btn => {
                    if (btn.dataset.main === 'prep') btn.classList.add('active');
                });
                navSubPrep.classList.remove('hidden');
                navSubBtns.forEach(btn => {
                    if (btn.dataset.sub === String(currentSlide)) btn.classList.add('active');
                });
            } else if (currentSlide >= 3 && currentSlide <= 6) {
                navMainBtns.forEach(btn => {
                    if (btn.dataset.main === 'progress') btn.classList.add('active');
                });
                navSubProgress.classList.remove('hidden');
                navSubBtns.forEach(btn => {
                    if (btn.dataset.sub === String(currentSlide)) btn.classList.add('active');
                });
            } else if (currentSlide === 7) {
                navMainBtns.forEach(btn => {
                    if (btn.dataset.main === 'calculator') btn.classList.add('active');
                });
            } else if (currentSlide === 8) {
                navMainBtns.forEach(btn => {
                    if (btn.dataset.main === 'qa') btn.classList.add('active');
                });
            }
            
            // Auto scroll removed
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                updateSlide();
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                updateSlide();
            }
        }

        function goToSlide(index) {
            currentSlide = index;
            updateSlide();
        }

        // Q&A Accordion Toggle Function
        function toggleQa(button) {
            const answerDiv = button.nextElementSibling;
            const icon = button.querySelector('.fa-chevron-down');

            if (answerDiv.classList.contains('open')) {
                answerDiv.classList.remove('open');
                icon.classList.remove('rotate-180');
            } else {
                document.querySelectorAll('.qa-answer.open').forEach(el => {
                    el.classList.remove('open');
                });
                document.querySelectorAll('.fa-chevron-down.rotate-180').forEach(el => {
                    el.classList.remove('rotate-180');
                });

                answerDiv.classList.add('open');
                icon.classList.add('rotate-180');
            }
        }

        // Modal Logic
        const modalData = {
            'production': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-indigo-800"><i class="fas fa-industry mr-2"></i>ìƒì‚°í˜„ì¥ì—­ëŸ‰</h3>
                <img src="https://i.postimg.cc/j2Wrr8pc/image.png" class="mobile-board-img">
                <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200 text-left">
                    <h4 class="font-bold text-xl text-indigo-800 mb-2">í–‰ë™ ìš”ë ¹</h4>
                    <ul class="list-disc pl-5 space-y-1 text-gray-700 text-lg">
                        <li>ì¹´ë“œ 1ì¥ì„ ê°€ì ¸ê°‘ë‹ˆë‹¤. (ë¬´ë£Œ)</li>
                        <li><strong class="text-indigo-600">ë‚´ìš©ì„ í° ì†Œë¦¬ë¡œ ì½ê³ </strong> ë³´ê´€í•˜ì„¸ìš”.</li>
                    </ul>
                </div>
            `,
            'chance': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-yellow-700"><i class="fas fa-dice mr-2"></i>ë³µë¶ˆë³µ</h3>
                <img src="https://i.postimg.cc/0rgh19d9/image.png" class="mobile-board-img">
                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200 text-left">
                    <h4 class="font-bold text-xl text-yellow-800 mb-2">í–‰ë™ ìš”ë ¹</h4>
                    <p class="text-gray-700 text-lg mb-2">ë³µë¶ˆë³µ ì¹´ë“œ 1ì¥ì„ ë’¤ì§‘ì–´ í™•ì¸í•˜ì„¸ìš”.</p>
                    <p class="font-bold text-yellow-700 text-lg"><i class="fas fa-exclamation-circle mr-1"></i>ì¹´ë“œ ì§€ì‹œì‚¬í•­ ì¦‰ì‹œ ìˆ˜í–‰!</p>
                </div>
            `,
            'failure': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-red-700"><i class="fas fa-exclamation-triangle mr-2"></i>íˆ¬ì ì‹¤íŒ¨</h3>
                <img src="https://i.postimg.cc/BZdvnDmW/image.png" class="mobile-board-img">
                <div class="bg-red-50 p-4 rounded-lg border border-red-200 text-left">
                    <h4 class="font-bold text-xl text-red-800 mb-2">ìœ„ê¸° ë°œìƒ!</h4>
                    <p class="text-gray-700 text-lg mb-2">ê¸°ìˆ  íˆ¬ì ì‹¤íŒ¨ë¡œ ì†ì‹¤ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p class="text-xl font-bold text-red-600 border-t border-red-200 pt-2">
                        ğŸ’¸ ì í˜€ìˆëŠ” ê¸ˆì•¡ë§Œí¼ ì°¨ê°(ì§€ì¶œ)
                    </p>
                </div>
            `,
            'go': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-green-700"><i class="fas fa-play mr-2"></i>Go! (ì¶œë°œ)</h3>
                <img src="https://i.postimg.cc/d0msWxFD/image.png" class="mobile-board-img">
                <div class="bg-green-50 p-4 rounded-lg border border-green-200 text-left">
                    <h4 class="font-bold text-xl text-green-800 mb-2">ì›”ê¸‰ ë°›ëŠ” ê³³</h4>
                    <ul class="list-disc pl-5 space-y-1 text-gray-700 text-lg">
                        <li>ì´ê³³ì— <strong>ë„ì°©</strong>í•˜ê±°ë‚˜</li>
                        <li>ì´ê³³ì„ <strong>ì§€ë‚˜ê°€ë©´</strong></li>
                        <li class="font-bold text-blue-600 list-none mt-2">ğŸ‘‰ ì›”ê¸‰ 2M íšë“!</li>
                    </ul>
                </div>
            `,
            'vacation': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-blue-700"><i class="fas fa-umbrella-beach mr-2"></i>íœ´ê°€</h3>
                <img src="https://i.postimg.cc/qqgpvB3n/image.png" class="mobile-board-img">
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 text-left">
                    <h4 class="font-bold text-xl text-blue-800 mb-2">ì ì‹œ ì‰¬ì–´ê°€ì„¸ìš”</h4>
                    <p class="text-gray-700 text-lg mb-3">ì´ë²ˆ í„´ì€ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                    <p class="font-bold text-blue-600 border-t border-blue-200 pt-2 text-lg">
                        ğŸ’¤ ë‹¤ìŒ í„´ ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ìƒëµ (1íšŒ íœ´ì‹)
                    </p>
                </div>
            `,
            'overseas': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-purple-700"><i class="fas fa-plane mr-2"></i>í•´ì™¸ì˜ì—…ì†Œ</h3>
                <img src="https://i.postimg.cc/5NhffVN2/image.png" class="mobile-board-img">
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200 text-left">
                    <h4 class="font-bold text-xl text-purple-800 mb-2">ê¸€ë¡œë²Œ ë¹„ì¦ˆë‹ˆìŠ¤ ì°¬ìŠ¤!</h4>
                    <p class="text-gray-700 text-lg mb-3">ë„ì°© ì‹œì—” ì‰½ë‹ˆë‹¤. í•˜ì§€ë§Œ...</p>
                    <p class="font-bold text-purple-700 border-t border-purple-200 pt-2 text-lg">
                        âœˆï¸ <strong>ë‹¤ìŒ í„´ì—</strong> ì›í•˜ëŠ” ì¹¸ìœ¼ë¡œ ì¦‰ì‹œ ì´ë™!
                    </p>
                    <p class="text-sm text-green-600 mt-1 font-bold">(Go!ë¥¼ ì§€ë‚˜ë©´ ì›”ê¸‰ë„ ë°›ìŒ)</p>
                </div>
            `,
            'social': `
                <h3 id="modal-title" class="text-2xl font-bold mb-4 flex items-center justify-center text-pink-700"><i class="fas fa-hand-holding-heart mr-2"></i>ì‚¬íšŒê³µí—Œ</h3>
                <img src="https://i.postimg.cc/tg5bdnd1/image.png" class="mobile-board-img">
                <div class="bg-pink-50 p-4 rounded-lg border border-pink-200 text-left">
                    <h4 class="font-bold text-xl text-pink-800 mb-2">ì•„ë¦„ë‹¤ìš´ ë‚˜ëˆ”</h4>
                    <ul class="list-disc pl-5 space-y-1 text-gray-700 text-lg">
                        <li><strong class="text-red-500">1Mì„ ê¸°ë¶€(ì§€ë¶ˆ)</strong>í•©ë‹ˆë‹¤.</li>
                        <li>ì‚¬íšŒê³µí—Œ ì¹´ë“œ 1ì¥ì„ íšë“í•©ë‹ˆë‹¤.</li>
                    </ul>
                </div>
            `
        };

        const modalOverlay = document.getElementById('modal-overlay');
        const modalCloseButton = document.getElementById('modal-close');
        let lastFocusedElement = null;

        const getFocusableElements = () => {
            const selectors = [
                'a[href]',
                'button:not([disabled])',
                'textarea:not([disabled])',
                'input:not([disabled])',
                'select:not([disabled])',
                '[tabindex]:not([tabindex="-1"])'
            ];
            return Array.from(modalOverlay.querySelectorAll(selectors.join(',')));
        };

        const handleModalKeydown = (event) => {
            if (!modalOverlay.classList.contains('open')) return;

            if (event.key === 'Escape') {
                event.preventDefault();
                closeModal();
                return;
            }

            if (event.key !== 'Tab') return;

            const focusableElements = getFocusableElements();
            if (focusableElements.length === 0) return;

            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];

            if (event.shiftKey) {
                if (document.activeElement === firstElement) {
                    event.preventDefault();
                    lastElement.focus();
                }
            } else if (document.activeElement === lastElement) {
                event.preventDefault();
                firstElement.focus();
            }
        };

        function openModal(key) {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = modalData[key];
            lastFocusedElement = document.activeElement;
            modalOverlay.classList.add('open');
            modalOverlay.setAttribute('aria-hidden', 'false');

            const focusableElements = getFocusableElements();
            if (focusableElements.length > 0) {
                focusableElements[0].focus();
            }
        }

        function closeModal() {
            modalOverlay.classList.remove('open');
            modalOverlay.setAttribute('aria-hidden', 'true');
            if (lastFocusedElement) {
                lastFocusedElement.focus();
            }
        }

        document.addEventListener('keydown', handleModalKeydown);

        // Touch Swipe Support
        let touchStartX = 0;
        let touchEndX = 0;
        const cardWrapper = document.getElementById('card-wrapper');

        cardWrapper.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });

        cardWrapper.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchStartX - touchEndX > 50) nextSlide();
            if (touchEndX - touchStartX > 50) prevSlide();
        }

        updateSlide();
    </script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel" data-presets="env,react">
        const { useState, useEffect, useRef } = React;

        const SETTLEMENT_COOKIE_KEY = "gaon_settlement_state";
        const SETTLEMENT_COOKIE_MAX_AGE = 60 * 60 * 24 * 14; // 14 days

        const getCookieValue = (name) => {
            const cookies = `; ${document.cookie}`;
            const parts = cookies.split(`; ${name}=`);
            if (parts.length === 2) {
                return parts.pop().split(";").shift();
            }
            return null;
        };

        const loadSettlementState = () => {
            const storedValue = getCookieValue(SETTLEMENT_COOKIE_KEY);
            if (!storedValue) return null;

            try {
                return JSON.parse(decodeURIComponent(storedValue));
            } catch (error) {
                return null;
            }
        };

        const saveSettlementState = (state) => {
            const encoded = encodeURIComponent(JSON.stringify(state));
            document.cookie = `${SETTLEMENT_COOKIE_KEY}=${encoded}; path=/; max-age=${SETTLEMENT_COOKIE_MAX_AGE}; samesite=lax`;
        };

        const App = () => {
            const UNIT_CONFIG = {
                M: { step: 0.1, maxDigits: 99, label: "M" },
                K: { step: 100, maxDigits: 10, label: "K" },
            };
            const [teamName, setTeamName] = useState("");
            const [currentCash, setCurrentCash] = useState(15);
            const [turn, setTurn] = useState(1);
            const [history, setHistory] = useState([]);
            const [unit, setUnit] = useState("M");
            const hasLoadedRef = useRef(false);
            const prevUnitRef = useRef("M");

            const INPUT_FIELDS = [
                "salary",
                "rentIn",
                "tradeIn",
                "etcIn",
                "invest",
                "rentOut",
                "tradeOut",
                "donation",
                "fine",
            ];

            const initialInputs = {
                salary: "",
                rentIn: "",
                tradeIn: "",
                etcIn: "",
                invest: "",
                rentOut: "",
                tradeOut: "",
                donation: "",
                fine: "",
            };

            const [inputs, setInputs] = useState(initialInputs);

            const formatInputForUnit = (valueInM, activeUnit) => {
                if (!valueInM) return "";
                const displayValue = activeUnit === "M" ? valueInM : valueInM * 1000;
                if (activeUnit === "M") {
                    return displayValue % 1 === 0
                        ? displayValue.toString()
                        : displayValue.toFixed(1);
                }
                return Math.round(displayValue).toString();
            };

            const parseInputValue = (value, activeUnit) => {
                if (value === "") return { valueInM: 0, isValid: true };
                const normalized = value.replace(/,/g, "");
                if (!/^\d*\.?\d*$/.test(normalized)) {
                    return { valueInM: 0, isValid: false };
                }
                const numericValue = parseFloat(normalized);
                if (Number.isNaN(numericValue) || numericValue < 0) {
                    return { valueInM: 0, isValid: false };
                }

                if (activeUnit === "M") {
                    const rounded = Math.round(numericValue * 10) / 10;
                    const isValid = Math.abs(rounded - numericValue) < 1e-9;
                    return { valueInM: rounded, isValid };
                }

                if (!Number.isInteger(numericValue) || numericValue % 100 !== 0) {
                    return { valueInM: numericValue / 1000, isValid: false };
                }
                return { valueInM: numericValue / 1000, isValid: true };
            };

            const parsedInputs = Object.fromEntries(
                INPUT_FIELDS.map((field) => [field, parseInputValue(inputs[field], unit)])
            );

            const getSafeValue = (field) =>
                parsedInputs[field].isValid ? parsedInputs[field].valueInM : 0;

            const totalIncome =
                getSafeValue("salary") +
                getSafeValue("rentIn") +
                getSafeValue("tradeIn") +
                getSafeValue("etcIn");
            const totalExpense =
                getSafeValue("invest") +
                getSafeValue("rentOut") +
                getSafeValue("tradeOut") +
                getSafeValue("donation") +
                getSafeValue("fine");
            const turnProfit = totalIncome - totalExpense;

            useEffect(() => {
                const storedState = loadSettlementState();
                if (storedState) {
                    const storedUnit = storedState.unit ?? "M";
                    const storedInputs = storedState.inputs ?? {};

                    setTeamName(storedState.teamName ?? "");
                    setCurrentCash(storedState.currentCash ?? 15);
                    setTurn(storedState.turn ?? 1);
                    setHistory(Array.isArray(storedState.history) ? storedState.history : []);
                    setUnit(storedUnit);
                    setInputs({
                        salary:
                            typeof storedInputs.salary === "number"
                                ? formatInputForUnit(storedInputs.salary, storedUnit)
                                : storedInputs.salary ?? "",
                        rentIn:
                            typeof storedInputs.rentIn === "number"
                                ? formatInputForUnit(storedInputs.rentIn, storedUnit)
                                : storedInputs.rentIn ?? "",
                        tradeIn:
                            typeof storedInputs.tradeIn === "number"
                                ? formatInputForUnit(storedInputs.tradeIn, storedUnit)
                                : storedInputs.tradeIn ?? "",
                        etcIn:
                            typeof storedInputs.etcIn === "number"
                                ? formatInputForUnit(storedInputs.etcIn, storedUnit)
                                : storedInputs.etcIn ?? "",
                        invest:
                            typeof storedInputs.invest === "number"
                                ? formatInputForUnit(storedInputs.invest, storedUnit)
                                : storedInputs.invest ?? "",
                        rentOut:
                            typeof storedInputs.rentOut === "number"
                                ? formatInputForUnit(storedInputs.rentOut, storedUnit)
                                : storedInputs.rentOut ?? "",
                        tradeOut:
                            typeof storedInputs.tradeOut === "number"
                                ? formatInputForUnit(storedInputs.tradeOut, storedUnit)
                                : storedInputs.tradeOut ?? "",
                        donation:
                            typeof storedInputs.donation === "number"
                                ? formatInputForUnit(storedInputs.donation, storedUnit)
                                : storedInputs.donation ?? "",
                        fine:
                            typeof storedInputs.fine === "number"
                                ? formatInputForUnit(storedInputs.fine, storedUnit)
                                : storedInputs.fine ?? "",
                    });
                }
                hasLoadedRef.current = true;
            }, []);

            useEffect(() => {
                if (!hasLoadedRef.current) return;
                saveSettlementState({
                    teamName,
                    currentCash,
                    turn,
                    history,
                    inputs,
                    unit,
                });
            }, [teamName, currentCash, turn, history, inputs, unit]);

            useEffect(() => {
                const prevUnit = prevUnitRef.current;
                if (prevUnit === unit) return;

                setInputs((prev) => {
                    const updated = { ...prev };
                    INPUT_FIELDS.forEach((field) => {
                        if (prev[field] === "") {
                            updated[field] = "";
                            return;
                        }
                        const parsed = parseInputValue(prev[field], prevUnit);
                        if (parsed.isValid) {
                            updated[field] = formatInputForUnit(parsed.valueInM, unit);
                        }
                    });
                    return updated;
                });

                prevUnitRef.current = unit;
            }, [unit]);

            const formatAmount = (valueInM) => {
                const multiplier = unit === "M" ? 1 : 1000;
                const rawValue = valueInM * multiplier;
                const rounded =
                    unit === "M" ? Math.round(rawValue * 10) / 10 : Math.round(rawValue);
                const hasDecimal = rounded % 1 !== 0;
                return rounded.toLocaleString(undefined, {
                    minimumFractionDigits: hasDecimal ? 1 : 0,
                    maximumFractionDigits: unit === "M" ? 1 : 0,
                });
            };

            const setInputValueInM = (field, valueInM) => {
                setInputs((prev) => ({
                    ...prev,
                    [field]: formatInputForUnit(valueInM, unit),
                }));
            };

            const handleInputChange = (field, value) => {
                setInputs((prev) => ({
                    ...prev,
                    [field]: value,
                }));
            };

            const finishTurn = () => {
                const invalidFields = INPUT_FIELDS.filter(
                    (field) => !parsedInputs[field].isValid
                );
                if (invalidFields.length > 0) {
                    window.alert(
                        "ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\nM ë‹¨ìœ„ëŠ” 0.1 ë‹¨ìœ„, K ë‹¨ìœ„ëŠ” 100 ë‹¨ìœ„ë¡œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤."
                    );
                    return;
                }

                if (totalIncome === 0 && totalExpense === 0) {
                    if (
                        !window.confirm(
                            "ìˆ˜ì…/ì§€ì¶œ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤. ì´ëŒ€ë¡œ í„´ì„ ë„˜ê¸°ì‹œê² ìŠµë‹ˆê¹Œ? "
                        )
                    ) {
                        return;
                    }
                }

                const newBalance = currentCash + turnProfit;
                const inputsInM = Object.fromEntries(
                    INPUT_FIELDS.map((field) => [field, parsedInputs[field].valueInM])
                );
                const turnData = {
                    id: Date.now(),
                    turn: turn,
                    income: totalIncome,
                    expense: totalExpense,
                    profit: turnProfit,
                    balance: newBalance,
                    details: inputsInM,
                };

                setHistory([turnData, ...history]);
                setCurrentCash(newBalance);
                setTurn(turn + 1);
                setInputs(initialInputs);
            };

            const resetGame = () => {
                if (window.confirm("ëª¨ë“  ê¸°ë¡ì„ ì§€ìš°ê³  ê²Œì„ì„ ì²˜ìŒë¶€í„° ì‹œì‘í• ê¹Œìš”?")) {
                    setTurn(1);
                    setCurrentCash(15);
                    setHistory([]);
                    setInputs(initialInputs);
                }
            };

            const clearInputs = () => {
                setInputs(initialInputs);
            };

            const undoLastTurn = () => {
                if (history.length === 0) return;
                if (!window.confirm("ë§ˆì§€ë§‰ í„´ ê¸°ë¡ì„ ì‚­ì œí•˜ê³  ë˜ëŒë¦¬ê² ìŠµë‹ˆê¹Œ?")) return;

                const lastTurn = history[0];
                const prevHistory = history.slice(1);

                setHistory(prevHistory);
                setCurrentCash(lastTurn.balance - lastTurn.profit);
                setTurn(lastTurn.turn);
            };

            const colorClasses = {
                blue: "border-blue-200 focus:ring-blue-500 text-blue-700",
                red: "border-red-200 focus:ring-red-500 text-red-700",
            };

            const InputField = ({ label, field, color = "blue" }) => (
                <div className="flex flex-col mb-2">
                    <label className="text-xs text-gray-500 font-bold mb-1">{label}</label>
                    <div className="flex items-center">
                        <input
                            type="text"
                            inputMode={unit === "K" ? "numeric" : "decimal"}
                            value={inputs[field]}
                            onChange={(e) => handleInputChange(field, e.target.value)}
                            placeholder="0"
                            className={`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 text-right font-mono text-lg bg-white ${colorClasses[color]}`}
                        />
                        <span className="ml-2 text-gray-400 text-sm">{UNIT_CONFIG[unit].label}</span>
                    </div>
                </div>
            );

            return (
                <div className="min-h-full bg-gray-100 p-3 sm:p-4 w-full max-w-none sm:max-w-md mx-auto font-sans rounded-2xl border border-gray-100">
                    <header className="bg-white rounded-2xl p-6 shadow-sm mb-4 border border-gray-200">
                        <div className="flex justify-between items-start mb-4">
                            <div>
                                <input
                                    type="text"
                                    placeholder="ì¡° ì´ë¦„ ì…ë ¥"
                                    className="text-lg font-bold text-gray-800 placeholder-gray-300 focus:outline-none bg-transparent w-32"
                                    value={teamName}
                                    onChange={(e) => setTeamName(e.target.value)}
                                />
                                <p className="text-xs text-gray-400">ëª¨ë…¸í´ë¦¬ ì†ìµê³„ì‚°ê¸°</p>
                            </div>
                            <button
                                onClick={resetGame}
                                className="text-gray-400 hover:text-red-500"
                                aria-label="ì •ì‚° ì´ˆê¸°í™”"
                            >
                                <i className="fa-solid fa-rotate-left"></i>
                            </button>
                        </div>

                        <div className="text-center">
                            <p className="text-sm text-gray-500 mb-1">í˜„ì¬ ë³´ìœ  ìì‚° </p>
                            <div className="text-5xl font-black text-blue-600 tracking-tight flex justify-center items-baseline">
                                {formatAmount(currentCash)}{" "}
                                <span className="text-2xl ml-1 text-blue-400">{unit}</span>
                            </div>
                        </div>
                        <div className="mt-3 flex justify-center">
                            <div className="inline-flex rounded-full bg-gray-100 p-1">
                                {["M", "K"].map((value) => (
                                    <button
                                        key={value}
                                        onClick={() => setUnit(value)}
                                        className={`px-3 py-1 text-xs font-bold rounded-full transition ${
                                            unit === value
                                                ? "bg-blue-600 text-white shadow"
                                                : "text-gray-500 hover:text-gray-700"
                                        }`}
                                    >
                                        {value} ë‹¨ìœ„ë¡œ ë³´ê¸°
                                    </button>
                                ))}
                            </div>
                        </div>
                    </header>

                    <div className="bg-white rounded-2xl shadow-lg border border-blue-100 overflow-hidden mb-6">
                        <div className="bg-blue-600 text-white p-3 flex justify-between items-center">
                            <h2 className="font-bold text-lg flex items-center">
                                <span className="bg-white text-blue-600 text-xs px-2 py-1 rounded-full mr-2 font-black">
                                    TURN {turn}
                                </span>
                                ì´ë²ˆ í„´ ê¸°ë¡
                            </h2>
                            <span className="text-xs opacity-80">
                                ë‹¨ìœ„: {unit} (1M=1000K)
                            </span>
                        </div>

                        <div className="p-4">
                            <div className="grid grid-cols-2 gap-4">
                                <div className="bg-blue-50 p-3 rounded-xl">
                                    <h3 className="text-blue-700 font-bold mb-3 flex items-center text-sm border-b border-blue-200 pb-1">
                                        <i className="fa-solid fa-arrow-trend-up mr-1"></i> ìˆ˜ì… 
                                    </h3>

                                    <div className="mb-3">
                                        <div className="flex justify-between items-end mb-1">
                                            <label className="text-xs font-bold text-gray-500">
                                                ì›”ê¸‰
                                            </label>
                                            <button
                                                onClick={() => setInputValueInM("salary", 2)}
                                                className="text-[10px] bg-blue-200 text-blue-700 px-1.5 py-0.5 rounded hover:bg-blue-300"
                                            >
                                                +2M 
                                            </button>
                                        </div>
                                        <div className="flex items-center">
                                            <input
                                                type="text"
                                                inputMode={unit === "K" ? "numeric" : "decimal"}
                                                value={inputs.salary}
                                                onChange={(e) => handleInputChange("salary", e.target.value)}
                                                className="w-full p-2 border border-blue-200 rounded-lg text-right font-mono text-blue-700"
                                                placeholder="0"
                                            />
                                            <span className="ml-2 text-gray-400 text-sm">
                                                {UNIT_CONFIG[unit].label}
                                            </span>
                                        </div>
                                    </div>

                                    <InputField label="í†µí–‰ë£Œ ìˆ˜ì…" field="rentIn" color="blue" />
                                    <InputField label="ì‚¬ì—… ë§¤ê°" field="tradeIn" color="blue" />
                                    <InputField label="ë³µë¶ˆë³µ ì¹´ë“œ" field="etcIn" color="blue" />
                                </div>

                                <div className="bg-red-50 p-3 rounded-xl">
                                    <h3 className="text-red-700 font-bold mb-3 flex items-center text-sm border-b border-red-200 pb-1">
                                        <i className="fa-solid fa-arrow-trend-down mr-1"></i> ì§€ì¶œ 
                                    </h3>

                                    <InputField label="ì‚¬ì—… íˆ¬ì ë¹„ìš©" field="invest" color="red" />
                                    <InputField label="í†µí–‰ë£Œ ì§€ì¶œ" field="rentOut" color="red" />

                                    <div className="mb-2">
                                        <div className="flex justify-between items-end mb-1">
                                            <label className="text-xs font-bold text-gray-500">
                                                ì‚¬íšŒê³µí—Œ
                                            </label>
                                            <button
                                                onClick={() => setInputValueInM("donation", 1)}
                                                className="text-[10px] bg-red-200 text-red-700 px-1.5 py-0.5 rounded hover:bg-red-300"
                                            >
                                                -1M 
                                            </button>
                                        </div>
                                        <div className="flex items-center">
                                            <input
                                                type="text"
                                                inputMode={unit === "K" ? "numeric" : "decimal"}
                                                value={inputs.donation}
                                                onChange={(e) => handleInputChange("donation", e.target.value)}
                                                className="w-full p-2 border border-red-200 rounded-lg text-right font-mono text-red-700"
                                                placeholder="0"
                                            />
                                            <span className="ml-2 text-gray-400 text-sm">
                                                {UNIT_CONFIG[unit].label}
                                            </span>
                                        </div>
                                    </div>

                                    <InputField label="ì†ì‹¤ ë°œìƒ" field="fine" color="red" />
                                    <InputField label="ë³µë¶ˆë³µ ì¹´ë“œ" field="tradeOut" color="red" />
                                </div>
                            </div>

                            <div className="mt-4 p-3 bg-gray-800 rounded-xl text-white flex justify-between items-center shadow-lg">
                                <div className="text-sm text-gray-400">
                                    <span className="text-blue-400">+{formatAmount(totalIncome)}</span> /{" "}
                                    <span className="text-red-400">-{formatAmount(totalExpense)}</span>
                                </div>
                                <div className="text-right">
                                    <span className="text-xs text-gray-400 block">ì´ë²ˆ í„´ ì†ìµ</span>
                                    <span
                                        className={`text-xl font-bold ${
                                            turnProfit >= 0 ? "text-green-400" : "text-red-400"
                                        }`}
                                    >
                                        {turnProfit > 0 ? "+" : ""}
                                        {formatAmount(turnProfit)} {unit}
                                    </span>
                                </div>
                            </div>

                            <div className="mt-3 grid grid-cols-2 gap-3">
                                <button
                                    onClick={clearInputs}
                                    className="w-full bg-white border border-gray-200 text-gray-500 font-bold py-3 rounded-xl shadow-sm transition hover:text-gray-700 hover:border-gray-300 flex items-center justify-center"
                                >
                                    <i className="fa-solid fa-eraser mr-2"></i> ì…ë ¥ ì§€ìš°ê¸°
                                </button>
                                <button
                                    onClick={finishTurn}
                                    className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl shadow-md transition flex items-center justify-center"
                                >
                                    <i className="fa-solid fa-floppy-disk mr-2"></i> í„´ ì¢…ë£Œ ë° ì €ì¥
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="space-y-3">
                        <h3 className="font-bold text-gray-500 text-sm flex items-center px-2">
                            <i className="fa-regular fa-clock mr-2"></i> ì§€ë‚œ í„´ ê¸°ë¡
                            {history.length > 0 && (
                                <button
                                    onClick={undoLastTurn}
                                    className="ml-auto text-xs text-red-400 underline"
                                >
                                    ë§ˆì§€ë§‰ í„´ ì·¨ì†Œ
                                </button>
                            )}
                        </h3>

                        {history.length === 0 ? (
                            <div className="text-center py-8 text-gray-400 bg-white rounded-xl border border-dashed border-gray-300">
                                ì•„ì§ ê¸°ë¡ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.
                                <br />
                                ê²Œì„ì„ ì‹œì‘í•´ë³´ì„¸ìš”!
                            </div>
                        ) : (
                            history.map((record) => (
                                <div
                                    key={record.id}
                                    className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center"
                                >
                                    <div>
                                        <div className="flex items-center gap-2 mb-1">
                                            <span className="bg-gray-100 text-gray-600 text-xs font-bold px-2 py-0.5 rounded">
                                                TURN {record.turn}
                                            </span>
                                            <span
                                                className={`text-sm font-bold ${
                                                    record.profit >= 0 ? "text-blue-600" : "text-red-500"
                                                }`}
                                            >
                                                {record.profit > 0 ? "+" : ""}
                                                {formatAmount(record.profit)} {unit}
                                            </span>
                                        </div>
                                        <div className="text-xs text-gray-400">
                                            ìˆ˜ì… {formatAmount(record.income)} / ì§€ì¶œ{" "}
                                            {formatAmount(record.expense)}
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-xs text-gray-400">ì”ì•¡</div>
                                        <div className="font-bold text-gray-800 text-lg">
                                            {formatAmount(record.balance)} {unit}
                                        </div>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>

                    <div className="mt-8 text-center pb-8">
                        <p className="text-xs text-gray-400">
                            * ì‹¤ì œ ì¹´ë“œ ê²°ì œê¸°ì—ëŠ” í„´ì´ ëë‚œ í›„
                            <br />
                            ìµœì¢… ê³„ì‚°ëœ ê¸ˆì•¡ë§Œ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById("settlement-app")).render(<App />);
    </script>
</body>
</html>
